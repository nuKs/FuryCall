{"version":3,"sources":["FuryCall.js"],"names":["FuryCall","opts","this","_object","object","_fn","fn","_args","args","_$then","$then","_$catch","$catch","_$args","i","hasOwnProperty","charAt","argNb","substr","resolveFn","setResolveFn","createParser","tokens","FuryCallParser","call","prototype","Object","create","constructor","_parseOptions","exec","apply","then","undefined","j","exports","module","window"],"mappings":"CAAA,WACA,YAEA,SAAAA,GAAAC,GACAA,EAAAA,MACAC,KAAAC,QAAAF,EAAAG,OACAF,KAAAG,IAAAJ,EAAAK,GACAJ,KAAAK,MAAAN,EAAAO,KAEAN,KAAAO,OAAAR,EAAAS,MACAR,KAAAS,QAAAV,EAAAW,OACAV,KAAAW,SAEA,KAAA,GAAAC,KAAAb,GACA,GAAAA,EAAAc,eAAAD,IAAA,MAAAA,EAAAE,OAAA,IAAA,UAAAF,GAAA,WAAAA,EAAA,CACA,GAAAG,GAAAH,EAAAI,OAAA,EACAhB,MAAAW,OAAAI,GAAAhB,EAAAa,IAIAd,EAAAmB,UAAA,KAEAnB,EAAAoB,aAAA,SAAAD,GACAnB,EAAAmB,UAAAA,GAGAnB,EAAAqB,aAAA,SAAAC,GACA,GAAAC,GAAA,SAAAtB,GACAD,EAAAwB,KAAAtB,KAAAD,GAgBA,OAdAsB,GAAAE,UAAAC,OAAAC,OAAA3B,EAAAyB,WACAF,EAAAE,UAAAG,YAAAL,EACAA,EAAAE,UAAAI,cAAA,SAAA5B,GACAA,EAAAD,EAAAyB,UAAAI,cAAAL,KAAAtB,KAAAD,EAEA,KAAA,GAAAa,KAAAb,GACAA,EAAAc,eAAAD,IAAAQ,EAAAP,eAAAd,EAAAa,MACAb,EAAAa,GAAAQ,EAAArB,EAAAa,IAAAU,KAAAtB,MAIA,OAAAD,IAGAsB,GAGAvB,EAAAyB,UAAAK,KAAA,SAAA7B,GAGA,MAFAA,GAAAC,KAAA2B,cAAA5B,GAEA,OAAAA,EAAAS,OAAA,OAAAT,EAAAW,OACAX,EAAAK,GAAAyB,MAAA9B,EAAAG,OAAAH,EAAAO,MAEA,kBAAAR,GAAAmB,UACAnB,EACAmB,UAAAlB,EAAAK,GAAAyB,MAAA9B,EAAAG,OAAAH,EAAAO,OACAwB,KAAA/B,EAAAS,MAAAT,EAAAW,QAGAX,EAAAK,GACAyB,MAAA9B,EAAAG,OAAAH,EAAAO,MACAwB,KAAA/B,EAAAS,MAAAT,EAAAW,SAIAZ,EAAAyB,UAAAI,cAAA,SAAA5B,GACAA,EAAAA,KAEA,IAAAK,GAAA,mBAAAL,GAAAK,GAAAL,EAAAK,GAAAJ,KAAAG,IACAD,EAAA,mBAAAH,GAAAG,OAAAH,EAAAG,OAAAF,KAAAC,SAAA8B,OACAvB,EAAA,mBAAAT,GAAAS,MAAAT,EAAAS,MAAAR,KAAAO,QAAA,KACAG,EAAA,mBAAAX,GAAAW,OAAAX,EAAAW,OAAAV,KAAAS,SAAA,KAEAH,EAAA,mBAAAP,GAAAO,KAAAP,EAAAO,SAAAN,KAAAK,SACA,KAAA,GAAAO,KAAAb,GACA,GAAAA,EAAAc,eAAAD,IAAA,MAAAA,EAAAE,OAAA,IAAA,UAAAF,GAAA,WAAAA,EAAA,CACA,GAAAG,GAAAH,EAAAI,OAAA,EACAV,GAAAS,GAAAhB,EAAAa,GAGA,IAAA,GAAAoB,KAAAhC,MAAAW,OACAqB,IAAA1B,KAAAN,KAAAW,OAAAE,eAAAmB,KACA1B,EAAA0B,GAAAhC,KAAAW,OAAAqB,GAIA,QACA5B,GAAAA,EACAF,OAAAA,EACAI,KAAAA,EACAE,MAAAA,EACAE,OAAAA,IAIA,mBAAAuB,SACAA,QAAAC,OAAApC,EAGAqC,OAAArC,SAAAA","file":"FuryCall.min.js","sourcesContent":["(function() {\n  'use strict';\n\n  function FuryCall(opts) {\n    opts = opts || {};\n    this._object = opts.object;\n    this._fn = opts.fn;\n    this._args = opts.args;\n\n    this._$then = opts.$then;\n    this._$catch = opts.$catch;\n    this._$args = {};\n\n    for (var i in opts) {\n      if (opts.hasOwnProperty(i) && i.charAt(0) === '$' && i !== '$then' && i !== '$catch') {\n        var argNb = i.substr(1);\n        this._$args[argNb] = opts[i];\n      }\n    }\n  }\n  FuryCall.resolveFn = null;\n\n  FuryCall.setResolveFn = function(resolveFn)Â {\n    FuryCall.resolveFn = resolveFn;\n  };\n\n  FuryCall.createParser = function(tokens) {\n    var FuryCallParser = function(opts) {\n      FuryCall.call(this, opts);\n    };\n    FuryCallParser.prototype = Object.create(FuryCall.prototype);\n    FuryCallParser.prototype.constructor = FuryCallParser;\n    FuryCallParser.prototype._parseOptions = function(opts) {\n      opts = FuryCall.prototype._parseOptions.call(this, opts);\n\n      for (var i in opts) {\n        if (opts.hasOwnProperty(i) && tokens.hasOwnProperty(opts[i])) {\n          opts[i] = tokens[opts[i]].call(this);\n        }\n      }\n\n      return opts;\n    };\n\n    return FuryCallParser;\n  };\n\n  FuryCall.prototype.exec = function(opts) {\n    opts = this._parseOptions(opts);\n\n    if (opts.$then === null && opts.$catch === null) {\n      return opts.fn.apply(opts.object, opts.args);\n    }\n    else if (typeof FuryCall.resolveFn === 'function') {\n      return FuryCall\n      .resolveFn(opts.fn.apply(opts.object, opts.args))\n      .then(opts.$then, opts.$catch);\n    }\n    else {\n      return opts.fn\n      .apply(opts.object, opts.args)\n      .then(opts.$then, opts.$catch);\n    }\n  };\n\n  FuryCall.prototype._parseOptions = function(opts) {\n    opts = opts || {};\n\n    var fn = (typeof opts.fn !== 'undefined') ? opts.fn : this._fn;\n    var object = (typeof opts.object !== 'undefined') ? opts.object : (this._object || undefined);\n    var $then = (typeof opts.$then !== 'undefined') ? opts.$then : (this._$then || null);\n    var $catch = (typeof opts.$catch !== 'undefined') ? opts.$catch : (this._$catch || null);\n\n    var args = (typeof opts.args !== 'undefined') ? (opts.args || []) : (this._args || []);\n    for (var i in opts) {\n      if (opts.hasOwnProperty(i) && i.charAt(0) === '$' && i !== '$then' && i !== '$catch') {\n        var argNb = i.substr(1);\n        args[argNb] = opts[i];\n      }\n    }\n    for (var j in this._$args) {\n      if (!(j in args) && this._$args.hasOwnProperty(j)) {\n        args[j] = this._$args[j];\n      }\n    }\n\n    return {\n      fn: fn,\n      object: object,\n      args: args,\n      $then: $then,\n      $catch: $catch\n    };\n  };\n\n  if (typeof exports !== 'undefined') {\n    exports.module = FuryCall;\n  }\n  else {\n    window.FuryCall = FuryCall;\n  }\n\n})();"],"sourceRoot":"/source/"}