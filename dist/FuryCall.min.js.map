{"version":3,"sources":["FuryCall.js"],"names":["FuryCall","opts","this","_object","object","_fn","fn","_args","args","_$then","$then","_$catch","$catch","_$args","i","hasOwnProperty","charAt","argNb","substr","_promiseFn","setPromiseFn","promiseFn","createParser","tokens","FuryCallParser","call","prototype","Object","create","constructor","_parseOptions","exec","apply","resolve","then","undefined","j","exports","module","window"],"mappings":"CAAA,WACA,YAEA,SAAAA,GAAAC,GACAA,EAAAA,MACAC,KAAAC,QAAAF,EAAAG,OACAF,KAAAG,IAAAJ,EAAAK,GACAJ,KAAAK,MAAAN,EAAAO,KAEAN,KAAAO,OAAAR,EAAAS,MACAR,KAAAS,QAAAV,EAAAW,OACAV,KAAAW,SAEA,KAAA,GAAAC,KAAAb,GACA,GAAAA,EAAAc,eAAAD,IAAA,MAAAA,EAAAE,OAAA,IAAA,UAAAF,GAAA,WAAAA,EAAA,CACA,GAAAG,GAAAH,EAAAI,OAAA,EACAhB,MAAAW,OAAAI,GAAAhB,EAAAa,IAIAd,EAAAmB,WAAA,KAEAnB,EAAAoB,aAAA,SAAAC,GACArB,EAAAmB,WAAAE,GAGArB,EAAAsB,aAAA,SAAAC,GACA,GAAAC,GAAA,SAAAvB,GACAD,EAAAyB,KAAAvB,KAAAD,GAgBA,OAdAuB,GAAAE,UAAAC,OAAAC,OAAA5B,EAAA0B,WACAF,EAAAE,UAAAG,YAAAL,EACAA,EAAAE,UAAAI,cAAA,SAAA7B,GACAA,EAAAD,EAAA0B,UAAAI,cAAAL,KAAAvB,KAAAD,EAEA,KAAA,GAAAa,KAAAb,GACAA,EAAAc,eAAAD,IAAAS,EAAAR,eAAAd,EAAAa,MACAb,EAAAa,GAAAS,EAAAtB,EAAAa,IAAAW,KAAAvB,MAIA,OAAAD,IAGAuB,GAGAxB,EAAA0B,UAAAK,KAAA,SAAA9B,GAEA,MADAA,GAAAC,KAAA4B,cAAA7B,GACA,OAAAA,EAAAS,OAAA,OAAAT,EAAAW,OACAX,EAAAK,GAAA0B,MAAA/B,EAAAG,OAAAH,EAAAO,MAEA,kBAAAR,GAAAmB,WACAnB,EACAmB,WAAA,SAAAc,GACAA,EAAAhC,EAAAK,GAAA0B,MAAA/B,EAAAG,OAAAH,EAAAO,SAEA0B,KAAAjC,EAAAS,MAAAT,EAAAW,QAGAX,EAAAK,GACA0B,MAAA/B,EAAAG,OAAAH,EAAAO,MACA0B,KAAAjC,EAAAS,MAAAT,EAAAW,SAIAZ,EAAA0B,UAAAI,cAAA,SAAA7B,GACAA,EAAAA,KAEA,IAAAK,GAAA,mBAAAL,GAAAK,GAAAL,EAAAK,GAAAJ,KAAAG,IACAD,EAAA,mBAAAH,GAAAG,OAAAH,EAAAG,OAAAF,KAAAC,SAAAgC,OACAzB,EAAA,mBAAAT,GAAAS,MAAAT,EAAAS,MAAAR,KAAAO,QAAA,KACAG,EAAA,mBAAAX,GAAAW,OAAAX,EAAAW,OAAAV,KAAAS,SAAA,KAEAH,EAAA,mBAAAP,GAAAO,KAAAP,EAAAO,SAAAN,KAAAK,SACA,KAAA,GAAAO,KAAAb,GACA,GAAAA,EAAAc,eAAAD,IAAA,MAAAA,EAAAE,OAAA,IAAA,UAAAF,GAAA,WAAAA,EAAA,CACA,GAAAG,GAAAH,EAAAI,OAAA,EACAV,GAAAS,GAAAhB,EAAAa,GAGA,IAAA,GAAAsB,KAAAlC,MAAAW,OACAuB,IAAA5B,KAAAN,KAAAW,OAAAE,eAAAqB,KACA5B,EAAA4B,GAAAlC,KAAAW,OAAAuB,GAIA,QACA9B,GAAAA,EACAF,OAAAA,EACAI,KAAAA,EACAE,MAAAA,EACAE,OAAAA,IAIA,mBAAAyB,SACAA,QAAAC,OAAAtC,EAGAuC,OAAAvC,SAAAA","file":"FuryCall.min.js","sourcesContent":["(function() {\n  'use strict';\n\n  function FuryCall(opts) {\n    opts = opts || {};\n    this._object = opts.object;\n    this._fn = opts.fn;\n    this._args = opts.args;\n\n    this._$then = opts.$then;\n    this._$catch = opts.$catch;\n    this._$args = {};\n\n    for (var i in opts) {\n      if (opts.hasOwnProperty(i) && i.charAt(0) === '$' && i !== '$then' && i !== '$catch') {\n        var argNb = i.substr(1);\n        this._$args[argNb] = opts[i];\n      }\n    }\n  }\n  FuryCall._promiseFn = null;\n\n  FuryCall.setPromiseFn = function(promiseFn)Â {\n    FuryCall._promiseFn = promiseFn;\n  };\n\n  FuryCall.createParser = function(tokens) {\n    var FuryCallParser = function(opts) {\n      FuryCall.call(this, opts);\n    };\n    FuryCallParser.prototype = Object.create(FuryCall.prototype);\n    FuryCallParser.prototype.constructor = FuryCallParser;\n    FuryCallParser.prototype._parseOptions = function(opts) {\n      opts = FuryCall.prototype._parseOptions.call(this, opts);\n\n      for (var i in opts) {\n        if (opts.hasOwnProperty(i) && tokens.hasOwnProperty(opts[i])) {\n          opts[i] = tokens[opts[i]].call(this);\n        }\n      }\n\n      return opts;\n    };\n\n    return FuryCallParser;\n  };\n\n  FuryCall.prototype.exec = function(opts) {\n    opts = this._parseOptions(opts);\n    if (opts.$then === null && opts.$catch === null) {\n      return opts.fn.apply(opts.object, opts.args);\n    }\n    else if (typeof FuryCall._promiseFn === 'function') {\n      return FuryCall\n      ._promiseFn(function(resolve, reject) {\n        resolve(opts.fn.apply(opts.object, opts.args));\n      })\n      .then(opts.$then, opts.$catch);\n    }\n    else {\n      return opts.fn\n      .apply(opts.object, opts.args)\n      .then(opts.$then, opts.$catch);\n    }\n  };\n\n  FuryCall.prototype._parseOptions = function(opts) {\n    opts = opts || {};\n\n    var fn = (typeof opts.fn !== 'undefined') ? opts.fn : this._fn;\n    var object = (typeof opts.object !== 'undefined') ? opts.object : (this._object || undefined);\n    var $then = (typeof opts.$then !== 'undefined') ? opts.$then : (this._$then || null);\n    var $catch = (typeof opts.$catch !== 'undefined') ? opts.$catch : (this._$catch || null);\n\n    var args = (typeof opts.args !== 'undefined') ? (opts.args || []) : (this._args || []);\n    for (var i in opts) {\n      if (opts.hasOwnProperty(i) && i.charAt(0) === '$' && i !== '$then' && i !== '$catch') {\n        var argNb = i.substr(1);\n        args[argNb] = opts[i];\n      }\n    }\n    for (var j in this._$args) {\n      if (!(j in args) && this._$args.hasOwnProperty(j)) {\n        args[j] = this._$args[j];\n      }\n    }\n\n    return {\n      fn: fn,\n      object: object,\n      args: args,\n      $then: $then,\n      $catch: $catch\n    };\n  };\n\n  if (typeof exports !== 'undefined') {\n    exports.module = FuryCall;\n  }\n  else {\n    window.FuryCall = FuryCall;\n  }\n\n})();"],"sourceRoot":"/source/"}