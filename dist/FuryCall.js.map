{"version":3,"sources":["FuryCall.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FuryCall.js","sourcesContent":["(function() {\n  'use strict';\n\n  function FuryCall(opts) {\n    opts = opts || {};\n    this._object = opts.object;\n    this._fn = opts.fn;\n    this._args = opts.args;\n\n    this._$then = opts.$then;\n    this._$catch = opts.$catch;\n    this._$args = {};\n\n    for (var i in opts) {\n      if (opts.hasOwnProperty(i) && i.charAt(0) === '$' && i !== '$then' && i !== '$catch') {\n        var argNb = i.substr(1);\n        this._$args[argNb] = opts[i];\n      }\n    }\n  }\n  FuryCall._promiseFn = null;\n\n  FuryCall.setPromiseFn = function(promiseFn)Â {\n    FuryCall._promiseFn = promiseFn;\n  };\n\n  FuryCall.createParser = function(tokens) {\n    var FuryCallParser = function(opts) {\n      FuryCall.call(this, opts);\n    };\n    FuryCallParser.prototype = Object.create(FuryCall.prototype);\n    FuryCallParser.prototype.constructor = FuryCallParser;\n    FuryCallParser.prototype._parseOptions = function(opts) {\n      opts = FuryCall.prototype._parseOptions.call(this, opts);\n\n      for (var i in opts) {\n        if (opts.hasOwnProperty(i) && tokens.hasOwnProperty(opts[i])) {\n          opts[i] = tokens[opts[i]].call(this);\n        }\n      }\n\n      return opts;\n    };\n\n    return FuryCallParser;\n  };\n\n  FuryCall.prototype.exec = function(opts) {\n    opts = this._parseOptions(opts);\n    if (opts.$then === null && opts.$catch === null) {\n      return opts.fn.apply(opts.object, opts.args);\n    }\n    else if (typeof FuryCall._promiseFn === 'function') {\n      return FuryCall\n      ._promiseFn(function(resolve, reject) {\n        resolve(opts.fn.apply(opts.object, opts.args));\n      })\n      .then(opts.$then, opts.$catch);\n    }\n    else {\n      return opts.fn\n      .apply(opts.object, opts.args)\n      .then(opts.$then, opts.$catch);\n    }\n  };\n\n  FuryCall.prototype._parseOptions = function(opts) {\n    opts = opts || {};\n\n    var fn = (typeof opts.fn !== 'undefined') ? opts.fn : this._fn;\n    var object = (typeof opts.object !== 'undefined') ? opts.object : (this._object || undefined);\n    var $then = (typeof opts.$then !== 'undefined') ? opts.$then : (this._$then || null);\n    var $catch = (typeof opts.$catch !== 'undefined') ? opts.$catch : (this._$catch || null);\n\n    var args = (typeof opts.args !== 'undefined') ? (opts.args || []) : (this._args || []);\n    for (var i in opts) {\n      if (opts.hasOwnProperty(i) && i.charAt(0) === '$' && i !== '$then' && i !== '$catch') {\n        var argNb = i.substr(1);\n        args[argNb] = opts[i];\n      }\n    }\n    for (var j in this._$args) {\n      if (!(j in args) && this._$args.hasOwnProperty(j)) {\n        args[j] = this._$args[j];\n      }\n    }\n\n    return {\n      fn: fn,\n      object: object,\n      args: args,\n      $then: $then,\n      $catch: $catch\n    };\n  };\n\n  if (typeof exports !== 'undefined') {\n    exports.module = FuryCall;\n  }\n  else {\n    window.FuryCall = FuryCall;\n  }\n\n})();"],"sourceRoot":"/source/"}